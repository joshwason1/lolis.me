<!DOCTYPE html>

<head>
    <script src="https://www.gstatic.com/firebasejs/4.8.1/firebase.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyCpdaBGE4RMXf40palfn8RmGGbpopJkwjA",
            authDomain: "lolis-me.firebaseapp.com",
            databaseURL: "https://lolis-me.firebaseio.com",
            projectId: "lolis-me",
            storageBucket: "lolis-me.appspot.com",
            messagingSenderId: "958738153770"
        };
        firebase.initializeApp(config);
    </script>

    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>Give Lolis the Love They Deserve</title>
    <link rel="stylesheet" href="main.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-92200197-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-92200197-2');
    </script>

</head>

<body>
    <div id="mute">
        <img id="muteIcon" src="volume.png" height="50" onclick="mute()">
    </div>

    <div id="main">
            <h2>Loved Lolis:</h2>
            <h1 id="value">Calculating</h1>
            <button id="button" onclick="increase()">      
    </div>
        
    <div id="footer">
        <p>Site created by joshwason1</p>
    </div>

    <video id="backgroundVideo" autoplay muted loop>
        <source src="https://files.catbox.moe/ymzr8e.webm"  type="video/webm">
    </video>
    <audio id="song" autoplay loop src="bgm.mp3" type="audio/mpeg" style="display:none" volume="0.5">
    
</body>

<script>
    const countRef = firebase.database().ref('count');
    countRef.on('value', function(snapshot) {
        update(snapshot.val());
    })

    function update(count) {
        document.getElementById("value").innerText = count.toLocaleString('en', {useGrouping:true});
    }

    function increase() {
        const xhttp = new XMLHttpRequest();
        xhttp.open("GET", "increase", true);
        xhttp.send();
    }

    function mute() {
        if (document.getElementById("song").muted == true) {
            document.getElementById("song").muted = false;
            document.getElementById("muteIcon").setAttribute("src", "volume.png");
        } else {
            document.getElementById("song").muted = true;
            document.getElementById("muteIcon").setAttribute("src", "mute.png")
        }
    }
</script>